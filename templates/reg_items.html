{% extends "index.html" %}
{% block title %}상품 등록{% endblock %}
{% block content %}

<h2 class="page-title">상품 등록</h2>

<div class="register-card">
  <form
    action="/submit_item_post"
    method="post"
    enctype="multipart/form-data"
    class="register-form"
  >
    <!-- 왼쪽 -->
    <div class="form-left">
      <label for="item_name">상품 이름</label>
      <input
        type="text"
        id="item_name"
        name="item_name"
        placeholder="상품명을 입력해주세요."
        required
      />

      <label for="item_price">상품 가격</label>
      <input
        type="text"
        id="item_price"
        name="item_price"
        placeholder="가격을 입력해주세요."
        required
      />

      <label>상품 상태</label>
      <div class="radio-row">
        <label
          ><input type="radio" name="condition" value="new" checked />
          새상품(미사용)</label
        >
        <label
          ><input type="radio" name="condition" value="almost_new" /> 거의
          새상품</label
        >
        <label
          ><input type="radio" name="condition" value="used" /> 사용감
          있음</label
        >
      </div>

      <div class="negotiation-line">
        <label
          ><input type="checkbox" name="negotiable" value="yes" checked /> 가격
          제안</label
        >
        <p class="hint">구매자가 가격을 제안할 수 있습니다.</p>
      </div>

      <label for="seller_id">판매자 아이디</label>
      <div class="readonly-field">
        {{ session['id'] }}
      </div>
      <input
        type="hidden"
        id="seller_id"
        name="seller_id"
        value="{{ session['id'] }}"
      />

      <label for="address">거래 희망 지역</label>
      <input
        type="text"
        id="address"
        name="address"
        placeholder="거래 희망 지역을 입력해주세요. (예:서대문구 대현동)"
        required
      />
    </div>

    <!-- 중간 세로 구분선 -->
    <div class="divider"></div>

    <!-- 오른쪽 -->
    <div class="form-right">
      <div class="photo-upload">
        <label for="file">대표 사진 업로드</label>
        <input
          type="file"
          id="file"
          name="file"
          accept="image/*"
          multiple
          required
        />
        <small class="upload-note">최대 10장 업로드 가능</small>
      </div>


      <label for="description">상품 설명</label>
      <textarea
        type="text"
        id="description"
        name="description"
        placeholder="상품 설명을 입력해주세요. (최소 30자)"
        required
      ></textarea>

      <div class="button-row">
        <button type="submit" class="primary-btn">상품 등록하기</button>
        <button type="button" class="outline-btn" onclick="history.back()">
          취소
        </button>
      </div>
    </div>
  </form>

  <script>
  document.querySelectorAll('input, textarea').forEach((el) => {
    el.addEventListener('focus', () => {
      el.dataset.placeholder = el.placeholder;
      el.placeholder = '';
    });
    el.addEventListener('blur', () => {
      el.placeholder = el.dataset.placeholder || "";
    });
  });

    const priceInput = document.getElementById("item_price");

    priceInput.addEventListener("input", (e) => {
      // 숫자만 남기기
      let value = e.target.value.replace(/[^0-9]/g, "");
      if (!value) {
        e.target.value = "";
        return;
      }
      const num = Number(value);
      e.target.value = num.toLocaleString("ko-KR") + "원";
    });

  const fileInput = document.getElementById("file");

  fileInput.addEventListener("change", () => {
    const files = fileInput.files;

    if (files.length > 10) {
      alert("사진은 최대 10장까지만 업로드할 수 있습니다!");
      fileInput.value = ""; // 선택 초기화
    }
  });
  </script>
</div>

{% endblock %}
