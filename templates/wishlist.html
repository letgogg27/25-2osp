{% extends "index.html" %}
{% block title %}찜 목록{% endblock %}

{% block content %}

<h2 class="page-title">내 찜 목록</h2>

{% if products|length == 0 %}
    <p style="text-align:center; margin-top:40px;">찜한 상품이 없습니다.</p>
{% else %}

<div class="item-grid">

    {% for p in products %}
    <div class="item-card">
        
        <!-- 상품 상세 이동 -->
        <a href="{{ url_for('item_detail', item_id=p.id) }}">
            <img 
                src="{{ url_for('static', filename='images/icons/' + p.img) }}"
                alt="{{ p.name }}"
            />
            <div class="item-info">
                <h3>{{ p.name }}</h3>
                <p>{{ "{:,}".format(p.price) }}원</p>
                <p>{{ p.location }}</p>
            </div>
        </a>

        <!-- 찜 취소(좋아요 취소) 버튼 -->
        <span 
            class="like-btn"
            style="color:red;"
            onclick="unlike({{ p.id }})"
        >
            ♥
        </span>

    </div>
    {% endfor %}

</div>

{% endif %}


<!-- jQuery -->
<script src="https://code.jquery.com/jquery-latest.min.js"></script>

<script>
/* 찜 취소 (교수님 방식) */
function unlike(pid) {
    $.ajax({
        url: "/unlike/" + pid,
        type: "POST",
        success: function(res) {
            // 취소한 후 페이지 새로고침
            location.reload();
        },
        error: function() {
            alert("오류가 발생했습니다.");
        }
    });
}
</script>

{% endblock %}
