{% extends "index.html" %}
{% block title %}찜 목록{% endblock %}

{% block content %}

<h2 class="page-title">내 찜 목록</h2>

{% if datas|length == 0 %}
    <p style="text-align:center; margin-top:40px;">찜한 상품이 없습니다.</p>
{% else %}

<div class="item-grid">

    {% for key, value in datas %}
    <div class="item-card">

        <!-- 상품 상세보기 -->
        <a href="{{ url_for('view_item_detail', name=key) }}">
            <img src="/static/images/{{ value.img_path }}" />
            <div class="item-info">
                <h3>{{ key }}</h3>
                <p>{{ value.price }}원</p>
                <p>{{ value.addr }}</p>
            </div>
        </a>

        <!-- 찜 취소 -->
        <span
            class="heart-icon"
            style="color:red;"
            onclick="unlike('{{ key }}')">
            ♥
        </span>

    </div>
    {% endfor %}

</div>

{% endif %}

<script src="https://code.jquery.com/jquery-latest.min.js"></script>

<script>
function unlike(pid) {
    $.ajax({
        type: "POST",
        url: "/unlike/" + pid + "/",
        success: function(res){
            location.reload();
        }
    });
}
</script>

{% endblock %}
