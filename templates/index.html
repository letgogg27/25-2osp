<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Ewha Market {% endblock %}</title>
    {% if session['id'] %}
    <meta name="current-user-id" content="{{ session['id'] }}" />
    {% endif %}

    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <!-- Google Material Icons -->
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <style>
      /* ✅ 페이지 기본 레이아웃 구조 */
      html,
      body {
        height: 100%;
        margin: 0;
        display: flex;
        flex-direction: column;
      }

      main {
        flex: 1; /* 본문이 footer 위를 밀어내도록 */
      }

      /* ✅ Footer 설정 */
      .footer {
        background-color: #00462a;
        color: #36ae92;
        text-align: center;
        padding: 25px 0 15px;
        font-family: "Noto Sans KR", sans-serif;
        font-size: 14px;
        position: relative; /* 따라오지 않고 아래로 밀림 */
        bottom: 0;
        width: 100%;
        margin-top: auto; /* 본문이 짧을 때 하단 고정 */
      }

      .footer-links {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 25px;
        margin-bottom: 10px;
      }

      .footer-links a {
        color: #36ae92;
        text-decoration: none;
        transition: color 0.3s ease;
      }

      .footer-links a:hover {
        color: #ffd700;
      }

      .footer-copy {
        font-size: 12px;
        color: #36ae92;
      }
    </style>
  </head>

  <body>
    <nav>
      <div class="navbar_logo">
        <a href="{{url_for('home')}}">Ewha Market</a>
      </div>

      <div class="navbar_menu">
        {% if session['id'] %}
        <div class="welcome-message">
          <a href="{{url_for('mypage')}}" class= "welcome-id">
            {{ session['id'] }}</a>님 반갑습니다!
        </div>
        {% endif %}
        <div>
          <a href="{{url_for('home')}}"><i class="fa-solid fa-house"></i> 홈</a>
        </div>
        <div>
          <a href="{{url_for('view_review')}}"
            ><img
              src="{{ url_for('static', filename='images/icons/star-rating.png') }}"
              alt="star-rating"
              class="review-icon"
            />
            리뷰</a
          >
        </div>
        <div>
          <a href="{{url_for('register_items')}}"
            ><i class="fa-solid fa-circle-plus"></i> 상품등록</a
          >
        </div>
        <div>
          <a href="{{url_for('reg_review_able')}}"
            ><i class="fa-solid fa-pen-to-square"></i>리뷰등록</a
          >
        </div>
        <div>
          <a href="{{ url_for('wishlist') }}"
            ><i class="fa-solid fa-heart"></i> 찜 목록</a
          >
        </div>

        <div>
          {% if session['id'] %}
          <a href="/logout"
            ><i class="fa-regular fa-circle-user"></i> 로그아웃</a
          >
          {% else %}
          <a href="{{url_for('login')}}"
            ><i class="fa-regular fa-circle-user"></i> 로그인</a
          >
          {% endif %}
        </div>
      </div>
    </nav>
    <main>{% block content %} {% endblock %}</main>

    <footer class="footer">
      <div class="footer-links">
        <a href="#">About</a>
        <a href="#">Contact</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms of Service</a>
      </div>
      <p class="footer-copy">©2025 Ewha Market. All rights reserved.</p>
    </footer>
    <!--  Add Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>

    <!-- Initialize Firebase with config -->
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyAR5OuTcrbMHcbv_v4iKABSs0xOJsjde3o",
        authDomain: "osp-4313f.firebaseapp.com",
        databaseURL: "https://osp-4313f-default-rtdb.firebaseio.com",
        projectId: "osp-4313f",
        storageBucket: "osp-4313f.firebasestorage.app",
        messagingSenderId: "344792589315",
        appId: "1:344792589315:web:dcf2a6fee14609776eda36",
      };

      // Initialize Firebase
      const app = firebase.initializeApp(firebaseConfig);

      // Make the database variable available for main.js to use
      const database = firebase.database();
    </script>

    <script src="{{url_for('static', filename='main.js')}}" defer></script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
  </body>
</html>
